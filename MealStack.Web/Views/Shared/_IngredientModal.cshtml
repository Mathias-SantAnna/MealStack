<!-- Add New Ingredient Modal -->
<div class="modal fade" id="addIngredientModal" tabindex="-1"
     aria-labelledby="addIngredientModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addIngredientModalLabel">
                    <i class="bi bi-plus-circle me-2 text-success"></i>Add New Ingredient
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <!-- Alert container for modal messages -->
                <div id="modal-messages"></div>

                <div class="alert alert-info">
                    <i class="bi bi-info-circle me-2"></i>
                    <strong>Adding a new ingredient:</strong> This will be saved to the database and available for all users.
                </div>

                <form id="newIngredientForm">
                    @Html.AntiForgeryToken()

                    <div class="mb-3">
                        <label for="new-ingredient-name" class="form-label">
                            Ingredient Name <span class="text-danger">*</span>
                        </label>
                        <input type="text"
                               class="form-control"
                               id="new-ingredient-name"
                               name="name"
                               required
                               maxlength="100"
                               placeholder="e.g., Chicken Breast, Olive Oil, Fresh Basil">
                        <div class="form-text">Enter the ingredient name as it should appear in recipes</div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="new-ingredient-category" class="form-label">Category</label>
                            <select class="form-select" id="new-ingredient-category" name="category">
                                <option value="">Select a category (optional)</option>
                                <option value="Meat & Poultry">Meat & Poultry</option>
                                <option value="Seafood">Seafood</option>
                                <option value="Dairy & Eggs">Dairy & Eggs</option>
                                <option value="Vegetables">Vegetables</option>
                                <option value="Fruits">Fruits</option>
                                <option value="Grains & Cereals">Grains & Cereals</option>
                                <option value="Herbs & Spices">Herbs & Spices</option>
                                <option value="Oils & Vinegars">Oils & Vinegars</option>
                                <option value="Baking">Baking</option>
                                <option value="Pantry Staples">Pantry Staples</option>
                                <option value="Condiments">Condiments</option>
                                <option value="Beverages">Beverages</option>
                                <option value="Other">Other</option>
                            </select>
                            <div class="form-text">Helps organize ingredients</div>
                        </div>

                        <div class="col-md-6">
                            <label for="new-ingredient-measurement" class="form-label">Default Unit</label>
                            <select class="form-select" id="new-ingredient-measurement" name="measurement">
                                <option value="">Select default unit (optional)</option>
                                <optgroup label="Volume">
                                    <option value="cup">Cup</option>
                                    <option value="tbsp">Tablespoon</option>
                                    <option value="tsp">Teaspoon</option>
                                    <option value="ml">Milliliter</option>
                                    <option value="l">Liter</option>
                                    <option value="fl oz">Fluid Ounce</option>
                                </optgroup>
                                <optgroup label="Weight">
                                    <option value="g">Gram</option>
                                    <option value="kg">Kilogram</option>
                                    <option value="oz">Ounce</option>
                                    <option value="lb">Pound</option>
                                </optgroup>
                                <optgroup label="Count">
                                    <option value="piece">Piece</option>
                                    <option value="slice">Slice</option>
                                    <option value="clove">Clove</option>
                                    <option value="pinch">Pinch</option>
                                    <option value="handful">Handful</option>
                                    <option value="dash">Dash</option>
                                </optgroup>
                            </select>
                            <div class="form-text">Most common unit for this ingredient</div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="new-ingredient-description" class="form-label">Description</label>
                        <textarea class="form-control"
                                  id="new-ingredient-description"
                                  name="description"
                                  rows="2"
                                  maxlength="500"
                                  placeholder="Optional: Add any helpful details (e.g., 'Boneless, skinless', 'Extra virgin', 'Fresh or dried')"></textarea>
                        <div class="form-text">Add any helpful details about this ingredient</div>
                    </div>
                </form>

                <!-- Preview section -->
                <div class="card bg-light mt-3" id="ingredient-preview" style="display: none;">
                    <div class="card-body py-2">
                        <small class="text-muted"><strong>Preview:</strong></small>
                        <div id="preview-content"></div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle me-1"></i>Cancel
                </button>
                <button type="button" class="btn btn-success" id="save-new-ingredient">
                    <i class="bi bi-plus-circle me-1"></i>Save Ingredient
                </button>
            </div>
        </div>
    </div>
</div>